import{a as S,c as j,d as x,e as _,f as q,g as c,h as I,j as O,k as R,l as T}from"./chunk-3PGDNC5K.js";import{a as D}from"./chunk-MJYIHZUX.js";import{C as m,D as d,F as v,J as i,R as k,_ as b,j as g,s as y,sa as s,sb as w}from"./chunk-5B4YHSEC.js";import{a as u,b as l}from"./chunk-ACKELEN3.js";function h(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&k(h);let a=t?e?.injector?.get(b)??i(b):null,f=M(e?.equal),o;e?.requireSync?o=s({kind:0},{equal:f}):o=s({kind:1,value:e?.initialValue},{equal:f});let p=n.subscribe({next:r=>o.set({kind:1,value:r}),error:r=>{if(e?.rejectErrors)throw r;o.set({kind:2,error:r})}});if(e?.requireSync&&o().kind===0)throw new d(601,!1);return a?.onDestroy(p.unsubscribe.bind(p)),w(()=>{let r=o();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function M(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var U="tasks",C=class n{_firestore=i(S);_collection=_(this._firestore,U);_authState=i(D);_query=O(this._collection,T("userId","==",this._authState.currentUser?.uid));loading=s(!0);constructor(){this._authState.currentUser}getTasks=h(j(this._query,{idField:"id"}).pipe(m(()=>{this.loading.set(!1)}),y(e=>(this.loading.set(!1),g(()=>e)))),{initialValue:[]});getTask(e){let t=c(this._collection,e);return I(t)}create(e){return x(this._collection,l(u({},e),{userId:this._authState.currentUser?.uid}))}update(e,t){let a=c(this._collection,t);return R(a,l(u({},e),{userId:this._authState.currentUser?.uid}))}delete(e){let t=c(this._collection,e);return q(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=v({token:n,factory:n.\u0275fac})};export{C as a};
