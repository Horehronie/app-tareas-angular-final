import{b as L}from"./chunk-JG3JJMIJ.js";import{c as B,d as z,e as A}from"./chunk-ZEAZJOJA.js";import{a as r}from"./chunk-PHPHF7LR.js";import{a as u}from"./chunk-WIDNJ34L.js";import"./chunk-3PGDNC5K.js";import{A as j,f as w,g as y,m as O,n as T,o as F,p as S,r as D,s as I,y as N}from"./chunk-A3JXB763.js";import"./chunk-EJJBCPAK.js";import"./chunk-MJYIHZUX.js";import{t as E,v as R}from"./chunk-BHTFXPLE.js";import{Ba as m,F as g,Gb as v,Ib as _,J as i,Jb as P,Ka as d,La as l,M as b,Sa as x,cb as s,fb as k,gb as M,hb as C,ka as p,sa as h}from"./chunk-5B4YHSEC.js";import{e as c}from"./chunk-ACKELEN3.js";var V=()=>["/tasks/"],f=class n{idTask="";_taskService=i(u);_router=i(_);_route=i(v);loading=h(!1);extractFilePath(t){try{let e="/o/",o=t.indexOf(e);if(o===-1)return null;let a=t.indexOf("?",o),H=t.substring(o+e.length,a!==-1?a:void 0);return decodeURIComponent(H)}catch(e){return console.error("Error extrayendo la ruta del archivo:",e),null}}deleteFile(t){return c(this,null,function*(){let e=this.extractFilePath(t);if(!e){console.error("No se pudo extraer la ruta del archivo.");return}let o=A(),a=z(o,e);yield B(a)})}ngOnInit(){let t=this._route.snapshot.paramMap.get("idTask");t?this.idTask=t:r.error("No se proporciono el id de la factura.")}submit(){return c(this,null,function*(){try{this.loading.set(!0);let t=yield this._taskService.getTask(this.idTask);if(!t.exists()){r.error("La factura no existe.");return}let e=t.data();e.archivo&&(yield this.deleteFile(e.archivo)),yield this._taskService.delete(this.idTask),r.success("Factura eliminada con exito"),this._router.navigateByUrl("/tasks")}catch(t){this.loading.set(!1),console.error("Error al eliminar la factura:",t),r.error("Hubo un error al eliminar la factura")}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-task-delete"]],standalone:!0,features:[k([u]),M],decls:11,vars:4,consts:[[1,"signup-container"],["mat-raised-button","","color","primary",1,"full-width",3,"click","disabled"],["mat-raised-button","",1,"back-button",3,"routerLink","disabled"]],template:function(e,o){e&1&&(d(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),s(4,"\xBFDesea eliminar la factura?"),l()(),d(5,"mat-card-content")(6,"form")(7,"a",1),x("click",function(){return o.submit()}),s(8," Eliminar "),l(),d(9,"a",2),s(10," Volver "),l()()()()()),e&2&&(p(7),m("disabled",o.loading()),p(2),m("routerLink",C(3,V))("disabled",o.loading()))},dependencies:[O,y,w,I,T,S,D,F,N,j,R,E,L,P],styles:[".signup-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#152426;padding:16px}mat-card[_ngcontent-%COMP%]{width:400px;color:#f3f4f6;background:#273436;border-radius:4px;padding:24px;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid rgba(255,255,255,.12)}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500;color:#ffffffde}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.full-width[mat-raised-button][_ngcontent-%COMP%]{padding:0 16px;height:36px;line-height:36px;font-weight:500;letter-spacing:.4px}.full-width[mat-raised-button][_ngcontent-%COMP%]:disabled{opacity:.7}.full-width[mat-raised-button][_ngcontent-%COMP%]:first-of-type{background-color:#f44336;color:#fff;margin-bottom:16px}.full-width[mat-raised-button][_ngcontent-%COMP%]:first-of-type:hover{background-color:#d32f2f}.full-width[mat-raised-button][_ngcontent-%COMP%]:last-of-type{background-color:transparent;color:#2196f3;border:1px solid currentColor}.full-width[mat-raised-button][_ngcontent-%COMP%]:last-of-type:hover{background-color:#2196f30a}@media (max-width: 480px){mat-card[_ngcontent-%COMP%]{width:100%;max-width:360px}}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}@media (forced-colors: active){.full-width[mat-raised-button][_ngcontent-%COMP%]{border:1px solid currentColor}}.back-button[_ngcontent-%COMP%]{width:100%;padding:clamp(.5rem,2vw,.75rem);display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:clamp(14px,4vw,16px)}.back-button[_ngcontent-%COMP%]:disabled{opacity:.7}.back-button[_ngcontent-%COMP%]{background-color:#37474f;color:#fff}.back-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#455a64}.back-button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#263238}"]});static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as default};
